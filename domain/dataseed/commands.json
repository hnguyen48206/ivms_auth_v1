[
    {
        "class_name": "cmdRTSP2HLS",
        "class_desc": "FFMPEG RTSP - HLS command",
        "class_type": "Streaming",
        "command": "ffmpeg ",
        "control": "-loglevel warning -analyzeduration 5000000 -probesize 1000000",
        "pre_input": " -fflags +igndts ",
        "input": "-rtsp_transport tcp -i '{rtsp}' ",
        "post_input": "{typeStr} ",
        "pre_output": "-f hls -strict 0 -hls_init_time 5 -hls_time 5 -hls_list_size 5 -start_number 0 -hls_allow_cache 1 -hls_flags +delete_segments+omit_endlist ",
        "output": "-hls_segment_filename '{dir}/file%03d.ts' ",
        "post_output": "{dir}/{streamId}.m3u8"
    },
    {
        "class_name": "cmdRTSP2RTSP",
        "class_desc": "FFMPEG RTSP - RTSP command",
        "class_type": "Restream",
        "command": "ffmpeg ",
        "control": "",
        "pre_input": "",
        "input": "-rtsp_transport tcp -i '{rtsp}' ",
        "post_input": "-vcodec {outputCodec} ",
        "pre_output": "-an -preset ultrafast ",
        "output": "-f rtsp '{rtspServerHost}:{rtspServerPort}/{streamId}' ",
        "post_output": ""
    },
    {
        "class_name": "cmdRTSP2FILE",
        "class_desc": "FFMPEG RTSP - FILE command",
        "class_type": "Recording",
        "command": "ffmpeg ",
        "control": "-loglevel quiet -analyzeduration 5000000 -probesize 1000000 ",
        "pre_input": " -fflags +igndts ",
        "input": "-rtsp_transport tcp -i '{rtsp}' ",
        "post_input": "-an -strict -2 -threads 1 ",
        "pre_output": "-vcodec copy ",
        "output": "-f segment -segment_format {output} -segment_atclocktime 1 -reset_timestamps 1 -strftime 1 -segment_list pipe:1 -segment_time {interval} ",
        "post_output": "{dir}/ire_{recordId}_%Y-%m-%dT%H-%M-%S.{output}"
    },
    {
        "class_name": "cmdClearFileByPreviousHour",
        "class_desc": "Clear Files By Hour command",
        "class_type": "Cron",
        "command": "find ",
        "control": "",
        "pre_input": "{dir} ",
        "input": "-type f -name *$(date -d '1 hour ago' +\"%Y-%m-%dT%H\")* ",
        "post_input": "-delete ",
        "pre_output": "",
        "output": "",
        "post_output": ""
    },
    {
        "class_name": "cmdClearFileByPreviousDay",
        "class_desc": "Clear Files By Day command",
        "class_type": "Cron",
        "command": "find ",
        "control": "",
        "pre_input": "{dir} ",
        "input": "-type f -name *$(date -d '1 day ago' +\"%Y-%m-%d\")* ",
        "post_input": "-delete ",
        "pre_output": "",
        "output": "",
        "post_output": ""
    },
    {
        "class_name": "cmdClearFileByCustomDate",
        "class_desc": "Clear Files By Day command",
        "class_type": "Cron",
        "command": "find ",
        "control": "",
        "pre_input": "{dir} ",
        "input": "-type f -name *{date}* ",
        "post_input": "-delete ",
        "pre_output": "",
        "output": "",
        "post_output": ""
    },
    {
        "class_name": "cmdRTSP2PNG",
        "class_desc": "FFMPEG RTSP - PNG command",
        "class_type": "Snapshot",
        "command": "ffmpeg ",
        "control": "-y ",
        "pre_input": "",
        "input": "-rtsp_transport tcp -i '{rtsp}' ",
        "post_input": "{outputSize} ",
        "pre_output": "-vframes 1 ",
        "output": "{filePath} ",
        "post_output": ""
    },
    {
        "class_name": "cmdHLS2PNG",
        "class_desc": "FFMPEG HLS - PNG command",
        "class_type": "Snapshot",
        "command": "ffmpeg ",
        "control": "-y ",
        "pre_input": "",
        "input": "-i '{rtsp}' ",
        "post_input": "{outputSize} ",
        "pre_output": "-vframes 1 ",
        "output": "{filePath} ",
        "post_output": ""
    },
    {
        "class_name": "cmdRTSPGetCodec",
        "class_desc": "FFMPEG Get codec from RTSP command",
        "class_type": "Restream",
        "command": "ffprobe ",
        "control": "-v fatal -show_entries stream=codec_name ",
        "pre_input": "-of default=nokey=1:noprint_wrappers=1 ",
        "input": "-i '{rtsp}' ",
        "post_input": "",
        "pre_output": "",
        "output": "",
        "post_output": ""
    },
    {
        "class_name": "RTSP_COPY_ORIGINAL",
        "class_desc": "FFMPEG Transcode command",
        "class_type": "Transcode",
        "command": "ffmpeg ",
        "control": " -threads 1 -loglevel quiet -err_detect aggressive -fflags discardcorrupt -strict 0 -timeout 0 ",
        "pre_input": " -analyzeduration 5000000 -probesize 1000000 -r 25 ",
        "input": "-rtsp_transport tcp -i '{rtsp}' -threads 1 ",
        "post_input": "-vcodec copy ",
        "pre_output": "-an -preset ultrafast -crf 22 -maxrate 30M -bufsize 30M ",
        "output": " ",
        "post_output": "-f rtsp '{rtspServerHost}:{rtspServerPort}/{streamId}' "
    },
    {
        "class_name": "RTSP_H264_ORIGINAL",
        "class_desc": "FFMPEG Transcode command",
        "class_type": "Transcode",
        "command": "ffmpeg ",
        "control": " -threads 1 -loglevel quiet -err_detect aggressive -fflags discardcorrupt -strict 0 -timeout 0 ",
        "pre_input": " -analyzeduration 5000000 -probesize 1000000 -r 25 ",
        "input": "-rtsp_transport tcp -i '{rtsp}' -threads 1 ",
        "post_input": "-vcodec libx264 ",
        "pre_output": "-an -preset ultrafast -crf 22 -maxrate 30M -bufsize 30M ",
        "output": " -vf \"drawtext=text='{rtspRestreamLicense}':x=(w-text_w):y=(h-text_h):fontsize=24:fontcolor=blue@0.6\" ",
        "post_output": "-f rtsp '{rtspServerHost}:{rtspServerPort}/{streamId}' "
    },
    {
        "class_name": "RTSP_H264_480P",
        "class_desc": "FFMPEG Transcode command",
        "class_type": "Transcode",
        "command": "ffmpeg ",
        "control": " -threads 1 -loglevel quiet -err_detect aggressive -fflags discardcorrupt -strict 0 -timeout 0 ",
        "pre_input": " -analyzeduration 5000000 -probesize 1000000 -r 25 ",
        "input": "-rtsp_transport tcp -i '{rtsp}' -threads 1 ",
        "post_input": "-vcodec libx264 ",
        "pre_output": "-an -preset ultrafast -crf 22 -maxrate 30M -bufsize 30M ",
        "output": "-vf \"scale=854:480,drawtext=text='{rtspRestreamLicense}':x=(w-text_w):y=(h-text_h):fontsize=24:fontcolor=blue@0.6\" ",
        "post_output": "-f rtsp '{rtspServerHost}:{rtspServerPort}/{streamId}' "
    },
    {
        "class_name": "RTSP_H264_720P",
        "class_desc": "FFMPEG Transcode command",
        "class_type": "Transcode",
        "command": "ffmpeg ",
        "control": " -threads 1 -loglevel quiet -err_detect aggressive -fflags discardcorrupt -strict 0 -timeout 0 ",
        "pre_input": " -analyzeduration 5000000 -probesize 1000000 -r 25 ",
        "input": "-rtsp_transport tcp -i '{rtsp}' -threads 1 ",
        "post_input": "-vcodec libx264 ",
        "pre_output": "-an -preset ultrafast -crf 22 -maxrate 30M -bufsize 30M ",
        "output": "-vf \"scale=1280:720,drawtext=text='{rtspRestreamLicense}':x=(w-text_w):y=(h-text_h):fontsize=24:fontcolor=blue@0.6\" ",
        "post_output": "-f rtsp '{rtspServerHost}:{rtspServerPort}/{streamId}' "
    },
    {
        "class_name": "RTSP_H264_1080P",
        "class_desc": "FFMPEG Transcode command",
        "class_type": "Transcode",
        "command": "ffmpeg ",
        "control": " -threads 1 -loglevel quiet -err_detect aggressive -fflags discardcorrupt -strict 0 -timeout 0 ",
        "pre_input": " -analyzeduration 5000000 -probesize 1000000 -r 25 ",
        "input": "-rtsp_transport tcp -i '{rtsp}' -threads 1 ",
        "post_input": "-vcodec libx264 ",
        "pre_output": "-an -preset ultrafast -crf 22 -maxrate 30M -bufsize 30M ",
        "output": "-vf \"scale=1920:1080,drawtext=text='{rtspRestreamLicense}':x=(w-text_w):y=(h-text_h):fontsize=24:fontcolor=blue@0.6\" ",
        "post_output": "-f rtsp '{rtspServerHost}:{rtspServerPort}/{streamId}' "
    },
    {
        "class_name": "RTSP_H264_2K",
        "class_desc": "FFMPEG Transcode command",
        "class_type": "Transcode",
        "command": "ffmpeg ",
        "control": " -threads 1 -loglevel quiet -err_detect aggressive -fflags discardcorrupt -strict 0 -timeout 0 ",
        "pre_input": " -analyzeduration 5000000 -probesize 1000000 -r 25 ",
        "input": "-rtsp_transport tcp -i '{rtsp}' -threads 1 ",
        "post_input": "-vcodec libx264 ",
        "pre_output": "-an -preset ultrafast -crf 22 -maxrate 30M -bufsize 30M ",
        "output": "-vf \"scale=2560:1440,drawtext=text='{rtspRestreamLicense}':x=(w-text_w):y=(h-text_h):fontsize=24:fontcolor=blue@0.6\" ",
        "post_output": "-f rtsp '{rtspServerHost}:{rtspServerPort}/{streamId}' "
    },
    {
        "class_name": "RTSP_H264_4K",
        "class_desc": "FFMPEG Transcode command",
        "class_type": "Transcode",
        "command": "ffmpeg ",
        "control": " -threads 1 -loglevel quiet -err_detect aggressive -fflags discardcorrupt -strict 0 -timeout 0 ",
        "pre_input": " -analyzeduration 5000000 -probesize 1000000 -r 25 ",
        "input": "-rtsp_transport tcp -i '{rtsp}' -threads 1 ",
        "post_input": "-vcodec libx264 ",
        "pre_output": "-an -preset ultrafast -crf 22 -maxrate 30M -bufsize 30M ",
        "output": "-vf \"scale=3840:2160,drawtext=text='{rtspRestreamLicense}':x=(w-text_w):y=(h-text_h):fontsize=24:fontcolor=blue@0.6\" ",
        "post_output": "-f rtsp '{rtspServerHost}:{rtspServerPort}/{streamId}' "
    },
    {
        "class_name": "RTSP_H265_ORIGINAL",
        "class_desc": "FFMPEG Transcode command",
        "class_type": "Transcode",
        "command": "ffmpeg ",
        "control": " -threads 1 -loglevel quiet -err_detect aggressive -fflags discardcorrupt -strict 0 -timeout 0 ",
        "pre_input": " -analyzeduration 5000000 -probesize 1000000 -r 25 ",
        "input": "-rtsp_transport tcp -i '{rtsp}' -threads 1 ",
        "post_input": "-vcodec libx265 ",
        "pre_output": "-an -preset ultrafast -crf 22 -maxrate 30M -bufsize 30M  ",
        "output": " -vf \"drawtext=text='{rtspRestreamLicense}':x=(w-text_w):y=(h-text_h):fontsize=24:fontcolor=blue@0.6\" ",
        "post_output": "-f rtsp '{rtspServerHost}:{rtspServerPort}/{streamId}' "
    },
    {
        "class_name": "RTSP_H265_480P",
        "class_desc": "FFMPEG Transcode command",
        "class_type": "Transcode",
        "command": "ffmpeg ",
        "control": " -threads 1 -loglevel quiet -err_detect aggressive -fflags discardcorrupt -strict 0 -timeout 0 ",
        "pre_input": " -analyzeduration 5000000 -probesize 1000000 -r 25 ",
        "input": "-rtsp_transport tcp -i '{rtsp}' -threads 1 ",
        "post_input": "-vcodec libx265 ",
        "pre_output": "-an -preset ultrafast -crf 22 -maxrate 30M -bufsize 30M ",
        "output": "-vf \"scale=854:480,drawtext=text='{rtspRestreamLicense}':x=(w-text_w):y=(h-text_h):fontsize=24:fontcolor=blue@0.6\" ",
        "post_output": "-f rtsp '{rtspServerHost}:{rtspServerPort}/{streamId}' "
    },
    {
        "class_name": "RTSP_H265_720P",
        "class_desc": "FFMPEG Transcode command",
        "class_type": "Transcode",
        "command": "ffmpeg ",
        "control": " -threads 1 -loglevel quiet -err_detect aggressive -fflags discardcorrupt -strict 0 -timeout 0 ",
        "pre_input": " -analyzeduration 5000000 -probesize 1000000 -r 25 ",
        "input": "-rtsp_transport tcp -i '{rtsp}' -threads 1 ",
        "post_input": "-vcodec libx265 ",
        "pre_output": "-an -preset ultrafast -crf 22 -maxrate 30M -bufsize 30M ",
        "output": "-vf \"scale=1280:720,drawtext=text='{rtspRestreamLicense}':x=(w-text_w):y=(h-text_h):fontsize=24:fontcolor=blue@0.6\" ",
        "post_output": "-f rtsp '{rtspServerHost}:{rtspServerPort}/{streamId}' "
    },
    {
        "class_name": "RTSP_H265_1080P",
        "class_desc": "FFMPEG Transcode command",
        "class_type": "Transcode",
        "command": "ffmpeg ",
        "control": " -threads 1 -loglevel quiet -err_detect aggressive -fflags discardcorrupt -strict 0 -timeout 0 ",
        "pre_input": " -analyzeduration 5000000 -probesize 1000000 -r 25 ",
        "input": "-rtsp_transport tcp -i '{rtsp}' -threads 1 ",
        "post_input": "-vcodec libx265 ",
        "pre_output": "-an -preset ultrafast -crf 22 -maxrate 30M -bufsize 30M ",
        "output": "-vf \"scale=1920:1080,drawtext=text='{rtspRestreamLicense}':x=(w-text_w):y=(h-text_h):fontsize=24:fontcolor=blue@0.6\" ",
        "post_output": "-f rtsp '{rtspServerHost}:{rtspServerPort}/{streamId}' "
    },
    {
        "class_name": "RTSP_H265_2K",
        "class_desc": "FFMPEG Transcode command",
        "class_type": "Transcode",
        "command": "ffmpeg ",
        "control": " -threads 1 -loglevel quiet -err_detect aggressive -fflags discardcorrupt -strict 0 -timeout 0 ",
        "pre_input": " -analyzeduration 5000000 -probesize 1000000 -r 25 ",
        "input": "-rtsp_transport tcp -i '{rtsp}' -threads 1 ",
        "post_input": "-vcodec libx265 ",
        "pre_output": "-an -preset ultrafast -crf 22 -maxrate 30M -bufsize 30M ",
        "output": "-vf \"scale=2560:1440,drawtext=text='{rtspRestreamLicense}':x=(w-text_w):y=(h-text_h):fontsize=24:fontcolor=blue@0.6\" ",
        "post_output": "-f rtsp '{rtspServerHost}:{rtspServerPort}/{streamId}' "
    },
    {
        "class_name": "RTSP_H265_4K",
        "class_desc": "FFMPEG Transcode command",
        "class_type": "Transcode",
        "command": "ffmpeg ",
        "control": " -threads 1 -loglevel quiet -err_detect aggressive -fflags discardcorrupt -strict 0 -timeout 0 ",
        "pre_input": " -analyzeduration 5000000 -probesize 1000000 -r 25 ",
        "input": "-rtsp_transport tcp -i '{rtsp}' -threads 1 ",
        "post_input": "-vcodec libx265 ",
        "pre_output": "-an -preset ultrafast -crf 22 -maxrate 30M -bufsize 30M ",
        "output": "-vf \"scale=3840:2160,drawtext=text='{rtspRestreamLicense}':x=(w-text_w):y=(h-text_h):fontsize=24:fontcolor=blue@0.6\" ",
        "post_output": "-f rtsp '{rtspServerHost}:{rtspServerPort}/{streamId}' "
    },
    {
        "class_name": "RTSP_VP8_ORIGINAL",
        "class_desc": "FFMPEG Transcode command",
        "class_type": "Transcode",
        "command": "ffmpeg ",
        "control": " -threads 1 -loglevel quiet -err_detect aggressive -fflags discardcorrupt -strict 0 -timeout 0 ",
        "pre_input": " -analyzeduration 5000000 -probesize 1000000 -r 25 ",
        "input": "-rtsp_transport tcp -i '{rtsp}' -threads 1 ",
        "post_input": "-c:v libvpx ",
        "pre_output": "-minrate 1M -maxrate 1M -b:v 1M -c:a libvorbis ",
        "output": "",
        "post_output": "-f rtsp '{rtspServerHost}:{rtspServerPort}/{streamId}' "
    },
    {
        "class_name": "RTSP_VP9_ORIGINAL",
        "class_desc": "FFMPEG Transcode command",
        "class_type": "Transcode",
        "command": "ffmpeg ",
        "control": " -threads 1 -loglevel quiet -err_detect aggressive -fflags discardcorrupt -strict 0 -timeout 0 ",
        "pre_input": " -analyzeduration 5000000 -probesize 1000000 -r 25 ",
        "input": "-rtsp_transport tcp -i '{rtsp}' -threads 1 ",
        "post_input": "-c:v libvpx-vp9 ",
        "pre_output": " -minrate 1M -maxrate 1M -b:v 1M ",
        "output": "",
        "post_output": "-f rtsp '{rtspServerHost}:{rtspServerPort}/{streamId}' "
    },
    {
        "class_name": "RTSP2WEBSOCKET",
        "class_desc": "FFMPEG RTSP - WS command",
        "class_type": "Streaming",
        "command": "ffmpeg ",
        "control": " -threads 1 -loglevel warning -probesize 1000000 ",
        "pre_input": " -fflags +igndts ",
        "input": " -rtsp_transport tcp -i '{rtsp}' ",
        "post_input": "",
        "pre_output": " -threads 1 -f mpegts -codec:v mpeg1video -bf 0 -codec:a mp2 -q 4 -muxdelay 0.001 ",
        "output": " http://{host}:{port}/{secret}/{streamId} ",
        "post_output": ""
    }
]